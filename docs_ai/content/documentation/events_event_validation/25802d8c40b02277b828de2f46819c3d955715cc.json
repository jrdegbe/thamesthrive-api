{"file_name": "docs/events/event_validation.md", "questions": ["Question: How to configure event validation?", "What are the endpoints responsible for creating the validation schemes?", "What is the default Time To Live for cache?", "What is the error returned if the validations do not pass?"], "answer": "# Event validation\nEvents can be validated. Event validation can be configured in the ThamesThrive GUI or via the API. The endpoints\nresponsible for creating the validation schemes are located at the following endpoints:\n\n| Method      | Path                                  |                                             |\n| ----------- | --------------------------------------|---------------------------------------------|\n| `GET`       | /event/management                     | Add event metadata and validation schema    |\n| `DELETE`    | /event/management/{event_type}        | Delete event metadata and validation schema |\n| `GET`       | /event/management                     | List event metadata with validation schemas |\n\nAs always, complete API documentation is available at:\n\n```\nhttp://ThamesThrive-host:8686/docs\n```\n\n## New event validation schema\n\nTo add new event validation schema that you will need to provide a Json Schema object that defines the model of event,\nor event session or loaded profile.\n\nValidator consist of 2 elements. Data to be validated - expressed in a [dotted notation](../notations/dot_notation.md), and a\njson schema itself.\n\n```json\n{\n  \"event@properties\": {\n    ...json-schema\n  },\n  \"profile@traits.my-data\": {\n    ...json-schema\n  }\n}\n```\n\n*Real example* - for event@properties\n\n```json\n{\n  \"validation\": {\n    \"json_schema\": {\n      \"event@properties\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"price\": {\n            \"type\": \"number\"\n          },\n          \"name\": {\n            \"type\": \"string\"\n          }\n        },\n        \"required\": [\n          \"name\"\n        ]\n      }\n    }\n  },\n  \"event_type\": \"test\"\n}\n```\n\n## Validation caching\n\nValidation is cached and the default Time To Live for cache is 180 seconds. It means that validation schema will stay\nthe same for 3 minutes even if it was change by the user. It will be red again after 180 seconds. To make the period\nlonger or shorter, run ThamesThrive with environment variable EVENT_VALIDATOR_TTL set to the number of seconds you would\nlike the system to cache the validation.\n\n## Validation errors\n\nIf the validations do not pass, an error 406 - NOT ACCEPTABLE status is returned with the information on the reason why\nthe validation did not pass.\n\n```json\n{\n  \"detail\": \"Validation failed with error: event@properties: 'name' is a required property....\"\n}\n```\n"}
